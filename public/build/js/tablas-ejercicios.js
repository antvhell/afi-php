!function(){for(var e={draggedElement:null,placeElement:function(t){if(t.classList.remove("over"),t.getAttribute("data-kana")==e.draggedElement.textContent){var a=e.draggedElement.cloneNode(!0);a=t.appendChild(a),e.applyDragEvents(a);var r=document.createElement("span");e.draggedElement.parentNode.replaceChild(r,e.draggedElement),document.querySelectorAll(".kanas [data-type]").length}else{t.classList.add("error");var n=document.querySelector("#errors");n.setAttribute("data-errors",parseInt(n.getAttribute("data-errors"))+1),setTimeout((function(){document.querySelector(".error").classList.remove("error")}),300)}},applyDragEvents:function(e){e.draggable=!0;var t=this;e.addEventListener("dragstart",(function(e){t.draggedElement=e.target,e.dataTransfer.setData("text/plain","")})),e.addEventListener("click",(function(e){(previousDraggedElement=document.querySelector(".dragging"))&&previousDraggedElement.classList.remove("dragging"),t.draggedElement=e.target,e.target.classList.add("dragging")}))},applyDropEvents:function(e){e.addEventListener("dragover",(function(e){for(var a=e.target,r=t.draggedElement.getAttribute("data-type");null!=a&&!a.classList.contains(r);)"BODY"==(a=a.parentNode).tagName&&(a=null);a&&(e.preventDefault(),this.classList.add("over"))})),e.addEventListener("dragleave",(function(){this.classList.remove("over")}));var t=this;e.addEventListener("drop",(function(e){t.placeElement(e.target)})),e.addEventListener("click",(function(e){(draggedElement=document.querySelector(".dragging"))&&draggedElement.getAttribute("data-type")==e.target.className&&(t.placeElement(e.target),draggedElement.classList.remove("dragging"))}))}},t=document.querySelectorAll("[data-type]"),a=t.length,r=0;r<a;r++)e.applyDragEvents(t[r]);var n=document.querySelectorAll(".katakana, .hiragana"),d=n.length;for(r=0;r<d;r++)e.applyDropEvents(n[r]);var l=document.querySelector(".kanas");for(r=l.children.length;r>=0;r--)l.appendChild(l.children[Math.random()*r|0])}();